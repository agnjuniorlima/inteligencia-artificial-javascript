/*! skmeans 2019-05-24 */

"use strict";!function e(i,f,s){function u(t,r){if(!f[t]){if(!i[t]){var n="function"==typeof require&&require;if(!r&&n)return n(t,!0);if(v)return v(t,!0);var o=new Error("Cannot find module '"+t+"'");throw o.code="MODULE_NOT_FOUND",o}var a=f[t]={exports:{}};i[t][0].call(a.exports,function(r){return u(i[t][1][r]||r)},a,a.exports,e,i,f,s)}return f[t].exports}for(var v="function"==typeof require&&require,r=0;r<s.length;r++)u(s[r]);return u}({1:[function(t,n,o){(function(){this.skmeans;var r=t("./main.js");void 0!==o&&(void 0!==n&&n.exports&&(o=n.exports=r),o.skmeans=r),"undefined"!=typeof window&&(window.skmeans=r)}).call(this)},{"./main.js":4}],2:[function(r,t,n){t.exports={eudist:function(r,t,n){for(var o=r.length,a=0,e=0;e<o;e++){var i=(r[e]||0)-(t[e]||0);a+=i*i}return n?Math.sqrt(a):a},mandist:function(r,t,n){for(var o=r.length,a=0,e=0;e<o;e++)a+=Math.abs((r[e]||0)-(t[e]||0));return n?Math.sqrt(a):a},dist:function(r,t,n){var o=Math.abs(r-t);return n?o:o*o}}},{}],3:[function(r,t,n){var o=r("./distance.js"),j=o.eudist,x=o.dist;t.exports={kmrand:function(r,t){for(var n={},o=[],a=t<<2,e=r.length,i=0<r[0].length;o.length<t&&0<a--;){var f=r[Math.floor(Math.random()*e)],s=i?f.join("_"):"".concat(f);n[s]||(n[s]=!0,o.push(f))}if(o.length<t)throw new Error("Error initializating clusters");return o},kmpp:function(r,t){var n=r[0].length?j:x,o=[],a=r.length,e=0<r[0].length,i=r[Math.floor(Math.random()*a)];e?i.join("_"):"".concat(i);for(o.push(i);o.length<t;){for(var f=[],s=o.length,u=0,v=[],c=0;c<a;c++){for(var h=1/0,d=0;d<s;d++){var l=n(r[c],o[d]);l<=h&&(h=l)}f[c]=h}for(var p=0;p<a;p++)u+=f[p];for(var m=0;m<a;m++)v[m]={i:m,v:r[m],pr:f[m]/u,cs:0};v.sort(function(r,t){return r.pr-t.pr}),v[0].cs=v[0].pr;for(var g=1;g<a;g++)v[g].cs=v[g-1].cs+v[g].pr;for(var k=Math.random(),M=0;M<a-1&&v[M++].cs<k;);o.push(v[M-1].v)}return o}}},{"./distance.js":2}],4:[function(r,t,n){var o=r("./distance.js"),a=r("./kinit.js"),B=o.eudist,G=(o.mandist,o.dist,a.kmrand),H=a.kmpp;function I(r,t,n){n=n||[];for(var o=0;o<r;o++)n[o]=t;return n}t.exports=function(r,t,n,o,a){var e=[],i=[],f=[],s=[],u=!1,v=o||1e4,c=r.length,h=r[0].length,d=0<h,l=[];if(n)e="kmrand"==n?G(r,t):"kmpp"==n?H(r,t):n;else for(var p={};e.length<t;){var m=Math.floor(Math.random()*c);p[m]||(p[m]=!0,e.push(r[m]))}do{I(t,0,l);for(var g=0;g<c;g++){for(var k=1/0,M=0,j=0;j<t;j++)(s=a?a(r[g],e[j]):d?B(r[g],e[j]):Math.abs(r[g]-e[j]))<=k&&(k=s,M=j);l[f[g]=M]++}for(var x=[],w=(i=[],0);w<t;w++)x[w]=d?I(h,0,x[w]):0,i[w]=e[w];if(d){for(var q=0;q<t;q++)e[q]=[];for(var b=0;b<c;b++)for(var E=x[f[b]],_=r[b],y=0;y<h;y++)E[y]+=_[y];u=!0;for(var O=0;O<t;O++){for(var D=e[O],N=x[O],U=i[O],z=l[O],C=0;C<h;C++)D[C]=N[C]/z||0;if(u)for(var F=0;F<h;F++)if(U[F]!=D[F]){u=!1;break}}}else{for(var L=0;L<c;L++)x[f[L]]+=r[L];for(var T=0;T<t;T++)e[T]=x[T]/l[T]||0;u=!0;for(var A=0;A<t;A++)if(i[A]!=e[A]){u=!1;break}}u=u||--v<=0}while(!u);return{it:1e4-v,k:t,idxs:f,centroids:e}}},{"./distance.js":2,"./kinit.js":3}]},{},[1]);